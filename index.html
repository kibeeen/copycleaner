<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS Copy Cleaner</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" type="text/css" href="style/ckeditor.css">

    <link rel="stylesheet" type="text/css" href="style/style.css">
    <link rel="stylesheet" type="text/css" href="style/betmgm.css">


    <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&amp;family=Poppins:wght@400;500;700&amp;display=swap">
    <link rel="stylesheet" onload="this.onload=null;this.removeAttribute('media');"
        href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&amp;family=Poppins:wght@400;500;700&amp;display=swap">

</head>

<body>



    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 48
        }
    </style>

    <overlay>
        <div id="overlay-loading">

        </div>
    </overlay>

    <header>
        <div class="container-fluid">
            <div class="cover-wrapper">
                CMS copy cleaner v1.4
            </div>
        </div>
    </header>

    <main class="main-body">
        <div class="container-fluid">
            <div class="main-wrapper">
                <div class="row">
                    <div class="raw-text__wrapper col">
                        <div class="editor">

                        </div>
                        <div class="mpp-simulator__wrapper">
                            <div class="portal-center-wrapper">
                                <div class="header-ctrl-wrapper promo-hub-top-nav epcot-header">
                                    <div class="header-ctrl d-flex justify-content-between align-items-center">

                                        <div class="header-ctrl-txt">MPP</div>
                                    </div>
                                </div>
                                <div class="promotions-detail promotion-container">
                                    <div class="cards width-restricted-medium">
                                        <div class="vn-profile-img"><img class="top-img profile-img-width"
                                                src="https://scmedia.nj.betmgm.com/$-$/d2a14d6d56994a73b8677d4e30683bce.jpg?p=width640">
                                        </div>
                                        <div class="card">
                                            <div class="promotion-detail promotion-border-bottom">
                                                <h2 class="promotion-main-headline detail">February 20 – 26, 2023</h2>
                                                <div class="promotion-body"></div><!----><!---->
                                            </div>
                                            <div class="promotion-detail">
                                                <h2 class="promotion-headline detail"></h2>
                                                <div class="promotion-body">
                                                    <p>Power up on FREEPLAY®! Wager $25 or more on our exclusive slot:
                                                        Wheel
                                                        of Fortune Power Wedges and get $10 FREEPLAY® to keep spinning.
                                                    </p>
                                                    <p><a data-offer-id="730906" class="btn offer-button-md"
                                                            style="background-color: #BDA871;"
                                                            data-offer-message-error="Technical Error"
                                                            data-offer-message-expired="Expired"
                                                            data-offer-message-invalid="Invalid"
                                                            data-offer-message-not-offered="Not Offered"
                                                            data-offer-message-offered="Opt In"
                                                            data-offer-message-opted-in="You Opted In"
                                                            data-offer-message-opted-out="You Opted Out"
                                                            data-offer-type="promos" ng-version="14.2.2"
                                                            data-offer-status="offered">Opt In</a> <a class="btn"
                                                            href="https://promo.nj.betmgm.com/en/promo/offers/grouped?filter=cp"
                                                            style="background-color: #BDA871;" ng-version="14.2.2">See
                                                            My
                                                            Progress</a></p>
                                                    <p><strong>How It Works:</strong></p>
                                                    <ul>
                                                        <li>Sign in to your BetMGM Casino account from 12:00 AM (EST),
                                                            February 20 – 11:59 PM, February 26, 2023 and opt in to the
                                                            Wheel of Fortune Power Wedges Bet &amp; Get promotion.</li>
                                                        <li>Once opted in, place $25 in wagers on Wheel of Fortune Power
                                                            Wedges to get your $10 FREEPLAY®.</li>
                                                        <li>After you wager the required $25 on Wheel of Fortune Power
                                                            Wedges, $10 FREEPLAY® will be automatically added to your
                                                            account.</li>
                                                        <li>$10 FREEPLAY® is valid only on Wheel of Fortune Power
                                                            Wedges,
                                                            subject to a 25x wagering requirement and valid for one (1)
                                                            day.
                                                            Wagering requirement contributions depend on the casino game
                                                            you
                                                            play. For more information, please see our Terms and
                                                            Conditions.
                                                        </li>
                                                    </ul>
                                                    <p><em>Please make sure to read our full Terms and Conditions before
                                                            participating in this promotion.</em></p>
                                                    <p><strong>Click Tile Below To Play Eligible Game:</strong></p>
                                                    <p><a href="https://casino.nj.betmgm.com/en/games/launchng/igtwofpowerwedges"
                                                            ng-version="14.2.2"><img
                                                                src="https://casinogames.nj.playmgm.com/htmllobby/images/newlmticons/square/igtwofpowerwedges.jpg"
                                                                width="100" height="100"
                                                                style="border: 5px solid #FFFFFF;"></a></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="promotion-tac-header epcot-text-color epcot-tac-arrow"><span>Terms
                                                and
                                                Conditions</span><i class="theme-up"></i></div><!---->
                                        <div id="promo-copy-fullterms"
                                            class="promotion-tac-body pc-txt epcot-text-color">
                                            <!-- PROMO FULL TERMS HERE -->
                                        </div>
                                    </div><!----><!----><!----><!---->
                                </div><!---->
                            </div>
                        </div>
                    </div>


                    <div class="cleaned-text__wrapper col" align="left">
                        <input type="button" class="btn btn-primary" value="Clean HTML" onclick="cleanHTML()">
                        <input type="button" class="btn btn-dark" value="Show Code" onclick="">
                        <button id="copy-code" class="btn btn-outline-primary" onclick=""><span
                                class="material-symbols-outlined">
                                content_paste
                            </span></button>
                        <div id="cleanedHTML__textarea" class="promotion-tac-body pc-txt epcot-text-color"></div>




                    </div>

                </div>
            </div>
        </div>


    </main>


    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <!-- CK5 Editor -->
    <script src="ckeditor5/build/ckeditor.js"></script>
    <script>ClassicEditor
            .create(document.querySelector('.editor'), {
                licenseKey: '',
            })
            .then(editor => {
                window.editor = editor;
            })
            .catch(error => {
                console.error('Oops, something went wrong!');
                console.error('Please, report the following error on https://github.com/ckeditor/ckeditor5/issues with the build id and the error stack trace:');
                console.warn('Build id: q93cuialosul-ulbmhzig3gvu');
                console.error(error);
            });
    </script>





    <!-- FUNCTIONS -->
    <script>

        const removables = [
            // [/error tags/g, 'replacement strings','Error Name','Is this a QA error? -> true or false']

            // REMOVES UNNECESSARY TAGS AND FIX SPACING ISSUES
            [/​/g, '', 'Half spaces', true],
            [/ /g, ' ', 'Narrow spaces', true],
            [/&nbsp;/g, ' ', '&nbsp; tags', true],
            [/<br>/g, ' ', '<br> tags', true],
            [/<\/br>/g, ' ', '<br> tags', true],
            [/< \/br>/g, ' ', '<br> tags', true],
            [/<span style="color:black;">/g, '', 'Span tags', false],
            [/<span style="color:#202124;">/g, '', 'Span tags', false],
            [/<span style="color:#242424;">/g, '', 'Span tags', false],
            [/<span style="color:red;">/g, '', 'Span tags', false],
            [/<span style="color:#050505;">/g, '', 'Span tags', false],
            [/<span style="color:#2F5496;">/g, '', 'Span tags', false],
            [/<span style="color:#2B579A;">/g, '', 'Span tags', false],
            [/<span style="color:#242424;">/g, '', 'Span tags', false],
            [/<span style="color:#404040;">/g, '', 'Span tags', false],
            [/<\/span>/g, '', 'Span tags', false],
            [/<p><\/p>/g, '', 'Extra <p> tags', true],
            [/<p><\/p>/g, '', 'Extra <p> tags', true],
            [/<p> <\/p>/g, '', 'Extra <p> tags', true],
            [/<p>\s*<\/p>/g, '', 'Extra <p> tags', true],
            [/<p><\/p><p>/g, '', 'Extra <p> tags', true],
            [/<\/ul><p> <\/p><p>/g, '', 'Extra <p> tags', true],
            [/<br data-cke-filler="true">/g, '', 'Extra <p> tags', true],
            [/<strong>\s*<\/strong>/g, ' ', 'Extra <strong> tags', false], // removes extra strong
            [/<\/strong>\s*<strong>/g, ' ', 'Extra <strong> tags', false], // removes extra strong
            [/\$10Bonus/g, '$10 Bonus', 'Sticky Text', true],

            // REMOVES TEXT DECORATION AND REFORMATS TEXT
            [/ am /g, ' AM ', 'Time lettercase', true], // converts pm to uppercase
            [/ pm /g, ' PM ', 'Time lettercase', true], // converts pm to uppercase
            [/<i>.<\/i>/g, '', 'Font decoration', true], // cleans <i> tags
            [/#BONUS_CODE#/g, '<strong>#BONUS_CODE#</strong>', 'Font decoration', false], // cleans <i> tags
            [/\(as defined in the Terms of Service&nbsp;/g, '(as defined in the Terms of Service', 'Bold characters', false],
            [/\(<i>Link to Terms of Service<\/i>\)/g, '', '"Link to Terms Service" lines', true],
            [/<strong> by <\/strong>/g, ' by ', 'Bold characters', false],
            [/<i>\(Link to Terms of Service\)<\/i> /g, '', '"Link to Terms Service" lines', true],
            [/<i>\(Link to Terms of Service\)<\/i><i>\).<\/i> /g, ').', '"Link to Terms Service" lines', true],
            [/\(Link to Terms of Service\)/g, '', '"Link to Terms Service" lines', true],
            [/<i>\(Link to Standard Promo TCs\)<\/i>/g, '', '"Link to Terms Service" lines', true],
            [/<i>\(Link to Standard Promo TCs\)<\/i><strong> by <\/strong>/g, 'by ', 'Bold characters', false],
            [/<strong> by <\/strong>/g, ' by ', 'Bold characters', false],
            [/\(<i>Link<\/i>\)/g, '', '', false],
            [/<i>\(Link to TCs\)<\/i>/g, '', '', false],
            [/ \)/g, ')', '', false],
            [/<p>&nbsp;<br><\/p>/g, '', '', false],
            [/<strong>My Account &gt; My Balance.<\/strong>/g, 'My Account &gt; My Balance.', 'Bold characters', false],
            [/<strong>My Account &gt; My Balance<\/strong>/g, 'My Account &gt; My Balance', 'Bold characters', false],
            [/<strong>Please review these Standard Promotional Terms and Conditions <\/strong>/g, 'Please review these Standard Promotional Terms and Conditions ', 'Bold characters', false],
            [/TOWARD BONUS WAGERING: <\/strong>/g, 'TOWARD BONUS WAGERING:</strong>', 'Extra white spaces', false],
            [/TOWARD BONUS WAGERING<\/strong> /g, 'TOWARD BONUS WAGERING:</strong>', 'Extra white spaces', false],
            [/<strong>DISCLAIMER<\/strong>:/g, '<strong>Disclaimer:</strong>', 'Fixed Capitalization', false],
            [/<strong>DISCLAIMER:<\/strong>:/g, '<strong>Disclaimer:</strong>', 'Fixed Capitalization', false],
            [/<span style="color:#2C2C2C;">. &lt;MDHHS LOGO - MDHHS logo sized to 3” wide&gt;<\/p>/g, '', 'Unnecessary characters', false],
            [/<i>\(Link to TCs\)<\/i>/g, '', '', false],
            [/\(<i>Link<\/i>\) /g, '', '', false],
            [/\(<i>Link<\/i>\)/g, '', '', false],
            [/<i>\(Link\)<\/i>/g, '', '', false],
            [/<i>\(Link to Terms of Service\)<\/i>/g, '', '', false],
            [/<strong>My Account&gt; My Balance.<\/strong>/g, 'My Account&gt; My Balance.', '', false],
            [/<strong>Standard Promotional Terms and Conditions<\/strong>/g, 'Standard Promotional Terms and Conditions', '', false],
            [/\(as defined in the <strong>Terms of Service<\/strong>\)/g, 'as defined in the Terms of Service', '', false],
            [/<strong>Standard Promotional Terms and Conditions <\/strong> by signing/g, 'Standard Promotional Terms and Conditions by signing', '', false],
            [/<strong>Order of Funds Used for Wagering:<\/strong> <\/p>/g, '<p><strong>Order of Funds Used for Wagering:</strong></p>', '', false],
            [/Game Contributions Toward Bonus Wagering/g, 'GAME CONTRIBUTIONS TOWARD BONUS WAGERING:', '', false],


            // ADDING LINK TO TEXT
            [/ <strong>here;<\/strong> <i>\(hyperlink to <\/i>!!M2.Promo\/offers\/grouped\?filter=cb/g, ' <a href="!!M2.Promo/offers/grouped?filter=cb">here</a>.', 'Extra <p> tags', true], // wrap in <a> tag
            [/ <strong>here<\/strong><strong>;<\/strong> <i>\(hyperlink to <\/i>!!M2.Promo\/offers\/grouped\?filter=cb/g, ' <a href="!!M2.Promo/offers/grouped?filter=cb">here</a>.', 'Extra <p> tags', true], // wrap in <a> tag
            [/<strong>here<\/strong> <i>\(hyperlink to <\/i>!!M2.Promo\/offers\/grouped\?filter=cb/g, ' <a href="!!M2.Promo/offers/grouped?filter=cb">here</a>.', 'Extra <p> tags', true],
            [/<strong>here ;<\/strong> <i>\(hyperlink to !!M2.Promo\/offers\/grouped\?filter=cb\)<\/i>/gi, ' <a href="!!M2.Promo/offers/grouped?filter=cb">here</a>.', 'Extra <p> tags', true],
            [/<strong>here ;<\/strong> <i>\(hyperlink to <\/i>!!M2.Promo\/offers\/grouped\?filter=cb/gi, ' <a href="!!M2.Promo/offers/grouped?filter=cb">here</a>.', 'Extra <p> tags', true],


            // [/ <\/p>/g, '</p>', 'Extra white spaces', false],
            // [/ <\/li>/g, '</li>', 'Extra white spaces', false],
            // [/<p><\/p>/g, '', 'Extra white spaces', false],
            // [/ <strong>/g, '<strong>', 'Extra white spaces', false],
            // [/<strong> /g, '<strong>', 'Extra white spaces', false],
            // [/<p> <strong>/g, '<p><strong>', 'Extra white spaces', false],
            // [/<p> <\/p>/g, '', 'Extra white spaces', false], // removes extra white spaces
            // [/! <\/p>/g, '!</p>', 'Extra white spaces', false], // removes extra white spaces
            // [/<p> /g, '<p>', 'Extra <p> tags', false], // removes extra white spaces


            // [/<p>\[REWARD TILE\]<\/p>/gi, '<span>[REWARD TILE]</span>', 'Rewrite Text', false],
            // [/<p>REWARD TILE<\/p>/gi, '<span>[REWARD TILE]</span>', 'Rewrite Text', false],
            // [/<p>SUBTITLE:/gi, '', 'Rewrite Text', false],
            // [/<p>\[SHORT SUMMARY]\: /gi, '[SHORT SUMMARY]<p>', 'Rewrite Text', false],
            // [/<p>\[SHORT SUMMARY\]<\/p>/gi, '<span>[SHORT SUMMARY]</span>', 'Rewrite Text', false],
            // [/H1:/g, '', 'Rewrite Text', false],
            // [/H2:/g, '', 'Rewrite Text', false],
            // [/  /g, ' ', 'Rewrite Text', false],
            // [/> </g, '><', 'Rewrite Text', false],
            // [/<p>\[promotion details\]<\/p>/g, '<span>[promotion details]</span>', 'Rewrite Text', false],
            // [/<p>\[CTA\]<\/p>/g, '<span>[CTA]</span>', 'Rewrite Text', false],
            // [/<strong>\[CTA\]<\/strong>/g, '<span>[CTA]</span>', 'Rewrite Text', false],
            // [/<p>\[PREVIEW DESCRIPTION\]<\/p>/g, '<span>[PREVIEW DESCRIPTION]</span>', 'Rewrite Text', false],
            // [/<p>\[PREVIEW DESCRIPTION\]:<\/p>/g, '<span>[PREVIEW DESCRIPTION]</span>', 'Rewrite Text', false],
            // [/<p>\[OVERLAY DESCRIPTION\]<\/p>/g, '<span>[OVERLAY DESCRIPTION]</span>', 'Rewrite Text', false],
            // [/<p>\[TOASTER DESCRIPTION\]<\/p>/g, '<span>[TOASTER DESCRIPTION]</span>', 'Rewrite Text', false],
            // [/<p>\[HERO IMAGE ART\]<\/p>/g, '<span>[HERO IMAGE ART]</span>', 'Rewrite Text', false],
            // [/<p>\[HERO IMAGE ART\] <\/p>/g, '<span>[HERO IMAGE ART]</span>', 'Rewrite Text', false],
            // [/<p>\[promotion dates\] /gi, '[promotional dates]<p>', 'Rewrite Text', false],
            // [/\[promotional dates\] /gi, '[promotional dates]<p>', 'Rewrite Text', false],
            // [/\[promotion description\] /gi, '</p>[promotion description]<p>', 'Rewrite Text', false],
            // [/<p>\[FULLVIEW TITLE\]: /gi, '[FULLVIEW TITLE]:<p>', 'Rewrite Text', false],
            // [/<p>\[FULLVIEW DESCRIPTION\]: /gi, '[FULLVIEW DESCRIPTION]:<p>', 'Rewrite Text', false],
            // [/<p>\[FULLVIEW DESCRIPTION\]<\/p>/gi, '', 'Rewrite Text', false],
            // [/<p><strong>\[CTA\] /gi, '[CTA]:<p><strong>', 'Rewrite Text', false],
            // [/\[FULLVIEW TITLE\]/gi, '', 'Rewrite Text', false],
            // [/<p>\[HERO IMAGE ART\]  <\/p>/gi, '', 'Rewrite Text', false],



        ];

        const gameCont_headerWrapper = [];

        gameCont_headerWrapper[0] = [
            ['<li><strong>', '</strong><ul>'],
            ['<li>', '<ul>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li></ul></li></ul></li></ul>'],
        ];


        gameCont_headerWrapper[1] = [
            ['<li><strong>', '</strong><ul>'],
            ['<li>', '<ul>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li>'],
            ['<li>', '</li>'],
            ['<li>', '<ul>'],
            ['<li>', '</li></ul></li></ul></li></ul></li></ul>'],
        ];




        const copyFix_settings = [

            {
                "id": 1,
                "element_id": 'promo-carousel',
                "headerTitle": "Carousel",
                "startIndexText": "<p><strong>CAROUSEL</strong></p>",
                "endIndexText": "<span>[CTA]</span>",
                "getTextBetweenTags": /<strong>(.*?)<(\/p|\/strong)>/g,
                "wrapInHTML": false
            },
            {
                "id": 2,
                "element_id": 'promo-keyterms',
                "headerTitle": "Promo Hub Key Terms",
                "startIndexText": "<p><strong>PROMO HUB KEY",
                "endIndexText": "[REWARD TILE]",
                "getTextBetweenTags": /<p>(.*?)<(\/p)>/gi,
                "wrapInHTML": false
            },
            {
                "id": 3,
                "element_id": 'promo-mpp',
                "headerTitle": "Promo Landing Page",
                "startIndexText": "[MPP 1080x486]:",
                "endIndexText": "How It Works:",
                "getTextBetweenTags": /<(?:p|strong)>(.*?)<\/(?:p|strong)>/gs,
                "wrapInHTML": false
            },
            {
                "id": 4,
                "element_id": 'promo-keyterms',
                "headerTitle": "Player Inbox",
                "startIndexText": "[PREVIEW TITLE]",
                "endIndexText": "OVERLAY",
                "getTextBetweenTags": /<(?:p|strong)>(.*?)<\/(?:p|strong)>/gs,
                "wrapInHTML": false
            },

        ]





        const target = document.querySelector('#ck5-textarea');

        // target.addEventListener('keyup', function () {
        //     // alert('tru');
        //     let keyStore = editor.getData('ck5-textarea');
        //     document.getElementById('cleanedHTML__textarea').innerHTML = keyStore;
        //     editor.setData(keyStore);
        // });


        target.addEventListener('copy', function () {

        });





        var cleanedText = null;


        function addSpacesAroundText(str) {
            const regexes = [/Bonus Dollars/, /FREEPLAY®/];
            let result = str;
            regexes.forEach(regex => {
                const re = new RegExp(`(\\S*)(${regex.source})(\\S*)`, 'g');
                result = result.replace(re, '$1 $2 $3');
            });

            return result;
        }

        function removeFigureDivTags(inputString) {
            const regex = /(<figure.*?>|<\/figure>|<svg.*?>[\s\S]*?(?:(?=<\/svg>)|<\/svg>)|<div.*?>)[\s\S]*?(?!(?:[^<]+>|[^>]+<\/table>))(?:(?=<\/table>)|<\/table>)/g;
            const outputString = inputString.replace(regex, '');
            return outputString;
        }



        const cleanHTML = () => {

        
            const isCopied = () => {
                document.getElementById('overlay-loading').style.visibility = "visible";
                let time_left = 1;
                let timer = setInterval(() => {
                    if (time_left <= 0) {
                        clearInterval(timer);
                        document.getElementById('overlay-loading').style.visibility = "hidden";
                        document.getElementById('overlay-loading').style.opacity = 0;
                    }

                    document.getElementById('overlay-loading').style.opacity = time_left;
                    console.log(time_left);
                    console.log(document.getElementById('overlay-loading').style.opacity);
                    time_left -= .1;
                    

                }, 40);
                
            }

            isCopied();


            let rawText = editor.getData('ck5-textarea');
            // let rawText = document.getElementById('ck5-textarea').innerHTML;
            rawText = removeFigureDivTags(rawText);
            let count = 0;
            let errorCatcher = [];
            let totalErrors = 0;

            for (let i = 0; i < removables.length; i++) {
                const regex = new RegExp(removables[i][0]);
                const errorName = removables[i][2];
                const qaItem = removables[i][3];
                const replacements = removables[i][1];
                const matches = rawText.match(regex);

                errorCatcher[[i, 0]] = regex;
                errorCatcher[[i, 2]] = errorName;
                errorCatcher[[i, 3]] = qaItem;

                if (matches) {
                    count += matches.length;
                    totalErrors += count;
                    errorCatcher[[i, 1]] = count;
                }

                rawText = rawText.replace(regex, replacements);

                count = 0;

            }

            cleanedText = rawText;

            //    const newCleanedText = cleanedText;

            const newCleanedText = addSpacesAroundText(cleanedText) // adds spaces around FREEPLAY, BONUS DOLLARS, etc..
            document.getElementById('cleanedHTML__textarea').innerHTML = cleanedText;
            // console.log(cleanedText)
            indentFix(newCleanedText);

            console.log(cleanedText);

            editor.setData(cleanedText);
        }



        const convertArray_toString = (toClean_text) => {

            let cleaned_text = '';
            for (let i = 0; i < toClean_text.length; i++) {
                cleaned_text += toClean_text[i];
            }
            return cleaned_text;

        }

        const cleanTags_fromArray = (array, regex) => {

            for (let i = 0; i < array.length; i++) {
                array[i] = array[i].replace(regex, '');
            }

            // removes empty strings from array
            array = array.filter(str => str.trim() !== '');

            return array;

        }

        const indentFix = (newCleanedText) => {

            const tempTextStorage = Array.from(cleanedText);
            const tempCleanedText = cleanedText;
            const tempTextStorage_length = tempTextStorage.length;


            let textWrapper = [];
            // console.log(cleanedText);

            let str = convertArray_toString(tempTextStorage);

            // console.log(str);
            // console.log(regexp_gameContributionHeader);

            let getStartIndex = '<li><strong>GAME CONTRIBUTIONS TOWARD BONUS WAGERING';
            let getEndIndex = '<p><strong>Order of Funds Used for Wagering:</strong>';
            let matchesStartIndex = [...str.matchAll(getStartIndex)];
            let matchesEndIndex = [...str.matchAll(getEndIndex)];
            let startIndexNumber = 0;
            let endIndexNumber = 0;

            // CHECKS IF THE TERMS HAVE THE "GAME CONTRIBUTIONS HEADER" 


            if (matchesStartIndex != '') {
                alert(matchesStartIndex);
                matchesStartIndex.forEach((matchesStart) => {
                    startIndexNumber = matchesStart.index;


                    console.log("match found at " + matchesStart.index);
                    // console.log(tempTextStorage.startIndexNumber);
                })

                if (matchesEndIndex) {
                    matchesEndIndex.forEach((matchesEnd) => {
                        endIndexNumber = matchesEnd.index;
                        console.log("match found at " + matchesEnd.index);


                        // console.log(tempTextStorage.endIndexNumber);
                    })
                }

                const cropText_1 = tempCleanedText.substring(0, startIndexNumber);
                const cropText_2 = tempCleanedText.substring(endIndexNumber, cleanedText.length);

                gameContributions_text = cleanedText.substring(startIndexNumber, endIndexNumber);

                console.log(gameContributions_text);

                let result = gameContributions_text.match(/<li>(.*?)<(ul|\/li)>/g);
                // let result = gameContributions_text.match(/<li>((?:(?!<\/?(ul|li)>)[\s\S])*)<\/li>|<li>((?:(?!<\/?(ul|li)>)[\s\S])*)<\/ul>/g);

                console.log(result);


                // console.log(result);
                // console.log('array length ' + gameCont_headerWrapper[0].length);

                // for(let i = 0; i < gameCont_headerWrapper[i].length; i++) {
                //     console.log('true');
                //     console.log(gameCont_headerWrapper[i].length);
                //     console.log(result.length);
                //     if(gameCont_headerWrapper[i].length == result.length) {

                //     }
                // }




                gameCont_headerWrapper.forEach((number, index) => {
                    // console.log('Index: ' + index + ' Value: ' + number + ' length ' + number.length);
                    let counter = 0;


                    if (result != null && result.length == number.length) {


                        counter++;


                        console.log('result: ' + result.length + ' == number: ' + number.length);
                        console.log('length of wrapper ' + gameCont_headerWrapper.length);

                        let regex = /(<([^>]+)>)/ig;
                        for (let i = 0; i < gameCont_headerWrapper[index].length; i++) {
                            result[i] = result[i].replace(regex, '');
                            // console.log(result[i]);                 
                        }


                        console.log(result);

                        // console.log(gameCont_headerWrapper[1][0][0]);
                        // console.log(gameCont_headerWrapper[1][1][0]);
                        // console.log(gameCont_headerWrapper[1][2][0]);
                        // console.log(gameCont_headerWrapper[1][3][0]);
                        // console.log(gameCont_headerWrapper[1][4][0]);
                        // console.log(gameCont_headerWrapper[1][5][0]);
                        // console.log(gameCont_headerWrapper[1][6][0]);
                        // console.log(gameCont_headerWrapper[1][7][0]);
                        // console.log('\n')
                        // console.log(gameCont_headerWrapper[1][0][1]);
                        // console.log(gameCont_headerWrapper[1][1][1]);
                        // console.log(gameCont_headerWrapper[1][2][1]);
                        // console.log(gameCont_headerWrapper[1][3][1]);
                        // console.log(gameCont_headerWrapper[1][4][1]);
                        // console.log(gameCont_headerWrapper[1][5][1]);
                        // console.log(gameCont_headerWrapper[1][6][1]);
                        // console.log(gameCont_headerWrapper[1][7][1]);
                        // console.log(gameCont_headerWrapper[0][8][1]);
                        // console.log('\n')
                        // console.log();

                        // Wrap HTML Tags in array
                        for (let i = 0; i < gameCont_headerWrapper[index].length; i++) {
                            console.log(i);
                            console.log(gameCont_headerWrapper[result.length - 8][i][0]);
                            textWrapper[i] = gameCont_headerWrapper[result.length - 8][i][0] + result[i] + gameCont_headerWrapper[result.length - 8][i][1];
                            // console.log(textWrapper[i]);
                        }





                    }

                    counter = 0;
                });

                // Remove HTML Tags from array




                // textWrapper = convertArray_toString(textWrapper);
                const tempCleanedText_1 = newCleanedText;
                const tempCleanedText_2 = newCleanedText;

                // console.log(endIndexNumber);

                // checker -- check if
                let x = '';
                for (let i = 0; i < 20; i++) {
                    x += tempTextStorage[endIndexNumber + i];
                }
                // console.log(x);

                let y = '';
                for (let y = 20; y < 0; y--) {
                    y += tempTextStorage[startIndexNumber + y];
                }
                // console.log(tempTextStorage[startIndexNumber-1]);
                // console.log(tempCleanedText_1.length);




                text_insert = convertArray_toString(textWrapper);

                console.log(text_insert)


                // console.log(cropText_2);
                // console.log(cleanedText);

                cleanedText = cropText_1 + text_insert + cropText_2;

                document.getElementById('cleanedHTML__textarea').innerHTML = cleanedText;
                document.getElementById('promo-copy-fullterms').innerHTML = cleanedText;

                // extractDataFromCopy();

                // console.log(cleanedText);

                editor.setData(cleanedText);
            } else {
                document.getElementById('cleanedHTML__textarea').innerHTML = cleanedText;
                document.getElementById('promo-copy-fullterms').innerHTML = cleanedText;
            }



            return cleanedText;



        }


        const extractDataFromCopy = () => {

            for (let i = 0; i < copyFix_settings.length; i++) {
                const copy = cleanedText;
                const settings = copyFix_settings;
                const escape_tags = settings[i].getTextBetweenTags;

                // this is the expression used to clean html tags
                const regex = /(<([^>]+)>)/ig;

                let search_start_text = settings[i].startIndexText;
                let search_end_text = settings[i].endIndexText;

                let start = [...copy.matchAll(search_start_text)];
                let end = [...copy.matchAll(search_end_text)];

                let start_index_length = settings[i].startIndexText.length;
                let end_index_length = settings[i].endIndexText.length;

                let start_index = copy.indexOf(search_start_text);
                let end_index = copy.indexOf(search_end_text);

                // cropped the carousel
                let crop_text_from_copy = copy.substring(start_index + start_index_length, end_index);

                // console.log(crop_text_from_copy);

                // insert the matches found into this array
                let cropped_text_escape = crop_text_from_copy.match(escape_tags);


                result = cleanTags_fromArray(cropped_text_escape, regex);


                console.log(result);

                console.log(search_start_text);
                console.log(start_index);

                console.log(search_end_text);
                console.log(end_index);

                console.log(cleanedText);

                // let x = document.getElementsByClassName('div');


                // console.log(x);
            }





        }
















    </script>











</body>

</html>